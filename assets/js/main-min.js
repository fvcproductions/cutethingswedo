var main=function($){var e={settings:{preload:!1,slideDuration:500,layoutDuration:750,thumbnailsPerRow:2,mainSide:"right"},$window:null,$body:null,$main:null,$thumbnails:null,$viewer:null,$toggle:null,$navNext:null,$navPrevious:null,slides:[],current:null,locked:!1,keys:{27:function(){e.toggle()},38:function(){e.up()},40:function(){e.down()},32:function(){e.next()},39:function(){e.next()},37:function(){e.previous()}},initProperties:function(){e.$window=$(window),e.$body=$("body"),e.$thumbnails=$("#thumbnails"),e.$viewer=$('<div id="viewer"><div class="inner"><div class="nav-next"></div><div class="nav-previous"></div><div class="toggle"></div></div></div>').appendTo(e.$body),e.$navNext=e.$viewer.find(".nav-next"),e.$navPrevious=e.$viewer.find(".nav-previous"),e.$main=$("#main"),$('<div class="toggle"></div>').appendTo(e.$main),e.$toggle=$(".toggle"),skel.vars.IEVersion<9&&e.$window.on("resize",function(){window.setTimeout(function(){e.$viewer.css("width",e.$window.width()-e.$main.width())},100)}).trigger("resize")},initEvents:function(){e.$window.on("load",function(){e.$body.removeClass("is-loading-0"),window.setTimeout(function(){e.$body.removeClass("is-loading-1")},100),window.setTimeout(function(){e.$body.removeClass("is-loading-2")},100+Math.max(e.settings.layoutDuration-150,0))});var i;e.$window.on("resize",function(){e.$body.addClass("is-loading-0"),window.clearTimeout(i),i=window.setTimeout(function(){e.$body.removeClass("is-loading-0")},100)}),e.$viewer.on("touchend",function(){skel.breakpoint("medium").active&&e.hide()}),e.$viewer.on("touchstart",function(i){e.$viewer.touchPosX=i.originalEvent.touches[0].pageX,e.$viewer.touchPosY=i.originalEvent.touches[0].pageY}).on("touchmove",function(i){if(null!==e.$viewer.touchPosX&&null!==e.$viewer.touchPosY){var n=e.$viewer.touchPosX-i.originalEvent.touches[0].pageX,o=e.$viewer.touchPosY-i.originalEvent.touches[0].pageY;boundary=20,delta=50,o<boundary&&o>-1*boundary&&n>delta?e.next():o<boundary&&o>-1*boundary&&n<-1*delta&&e.previous();var t=e.$viewer.outerHeight(),s=e.$viewer.get(0).scrollHeight-e.$viewer.scrollTop();(e.$viewer.scrollTop()<=0&&o<0||s>t-2&&s<t+2&&o>0)&&(i.preventDefault(),i.stopPropagation())}}),e.$main.on("touchstart",function(i){skel.breakpoint("xsmall").active||(e.$main.touchPosX=i.originalEvent.touches[0].pageX,e.$main.touchPosY=i.originalEvent.touches[0].pageY)}).on("touchmove",function(i){if(!skel.breakpoint("xsmall").active&&null!==e.$main.touchPosX&&null!==e.$main.touchPosY){var n=e.$main.touchPosX-i.originalEvent.touches[0].pageX,o=e.$main.touchPosY-i.originalEvent.touches[0].pageY;switch(boundary=20,delta=50,result=!1,e.settings.mainSide){case"left":result=o<boundary&&o>-1*boundary&&n>delta;break;case"right":result=o<boundary&&o>-1*boundary&&n<-1*delta;break;default:break}result&&e.hide();var t=e.$main.outerHeight(),s=e.$main.get(0).scrollHeight-e.$main.scrollTop();(e.$main.scrollTop()<=0&&o<0||s>t-2&&s<t+2&&o>0)&&(i.preventDefault(),i.stopPropagation())}}),e.$toggle.on("click",function(){e.toggle()}),e.$toggle.on("touchend",function(e){e.stopPropagation()}),e.$navNext.on("click",function(){e.next()}),e.$navPrevious.on("click",function(){e.previous()}),e.$body.on("keydown","input,select,textarea",function(e){e.stopPropagation()}),e.$window.on("keydown",function(i){skel.breakpoint("xsmall").active||i.keyCode in e.keys&&(i.stopPropagation(),i.preventDefault(),e.keys[i.keyCode]())})},initViewer:function(){e.$thumbnails.on("click",".thumbnail",function(i){var n=$(this);i.preventDefault(),i.stopPropagation(),e.locked&&n.blur(),e.switchTo(n.data("index"))}),e.$thumbnails.children().each(function(){var i=$(this),n=i.children(".thumbnail"),o;if(o={$parent:i,$slide:null,$slideImage:null,$slideCaption:null,url:n.attr("href"),loaded:!1},i.attr("tabIndex","-1"),o.$slide=$('<div class="slide"><div class="caption"></div><div class="image"></div></div>'),o.$slideImage=o.$slide.children(".image"),o.$slideImage.css("background-image","").css("background-position",n.data("position")||"center"),o.$slideCaption=o.$slide.find(".caption"),i.children().not(n).appendTo(o.$slideCaption),e.settings.preload){var t=$('<img src="'+o.url+'" />');o.$slideImage.css("background-image","url("+o.url+")"),o.$slide.addClass("loaded"),o.loaded=!0}e.slides.push(o),n.data("index",e.slides.length-1)})},init:function(){skel.vars.IEVersion<10&&(e.settings.slideDuration=0,e.settings.layoutDuration=0),skel.breakpoints({xlarge:"(max-width: 1680px)",large:"(max-width: 1280px)",medium:"(max-width: 980px)",small:"(max-width: 736px)",xsmall:"(max-width: 480px)"}),e.initProperties(),e.initViewer(),e.initEvents(),window.setTimeout(function(){skel.on("-xsmall !xsmall",function(){null===e.current&&e.switchTo(0,!0)})},0)},switchTo:function(i,n){if((e.current!=i||skel.breakpoint("xsmall").active)&&!e.locked){e.locked=!0,!n&&skel.breakpoint("medium").active&&skel.vars.IEVersion>8&&e.hide();var o=null!==e.current?e.slides[e.current]:null,t=e.slides[i];e.current=i,o&&(o.$parent.removeClass("active"),o.$slide.removeClass("active")),t.$parent.addClass("active").focus();var s=function(){o&&o.$slide.detach(),t.$slide.appendTo(e.$viewer),t.loaded?window.setTimeout(function(){t.$slide.addClass("active"),window.setTimeout(function(){e.locked=!1},100)},100):window.setTimeout(function(){t.$slide.addClass("loading"),$('<img src="'+t.url+'" />').on("load",function(){t.$slideImage.css("background-image","url("+t.url+")"),t.loaded=!0,t.$slide.removeClass("loading"),t.$slide.addClass("active"),window.setTimeout(function(){e.locked=!1},100)})},100)};o?window.setTimeout(s,e.settings.slideDuration):s()}},next:function(){var i,n=e.current;i=n>=e.slides.length-1?0:n+1,e.switchTo(i)},previous:function(){var i,n=e.current,o=e.slides.length;i=n<=0?o-1:n-1,e.switchTo(i)},up:function(){if(!e.$body.hasClass("fullscreen")){var i,n=e.current,o=e.slides.length,t=e.settings.thumbnailsPerRow;i=n<=t-1?o-(t-1-n)-1:n-t,e.switchTo(i)}},down:function(){if(!e.$body.hasClass("fullscreen")){var i,n=e.current,o=e.slides.length,t=e.settings.thumbnailsPerRow;i=n>=o-t?n-o+t:n+t,e.switchTo(i)}},show:function(){e.$body.hasClass("fullscreen")&&(e.$body.removeClass("fullscreen"),e.$main.focus())},hide:function(){e.$body.hasClass("fullscreen")||(e.$body.addClass("fullscreen"),e.$main.blur())},toggle:function(){e.$body.hasClass("fullscreen")?e.show():e.hide()}};return e}(jQuery);main.init();